# ./nginx/nginx.conf
events {}

http {
    # Define a server block that listens on port 80
    server {
        listen 80;

        # 1. Forward API calls to the Axum backend
        location /api/ {
            # Route requests starting with /api/ to the Axum container
            # The hostname 'backend' is the service name from docker-compose
            proxy_pass http://backend:3000;
        }

        # 2. Forward all other requests to the Angular dev server
        location / {
            # Route requests for the UI to the Angular container
            # The hostname 'frontend' is the service name from docker-compose
            proxy_pass http://frontend:4200;
        }
    }
}
